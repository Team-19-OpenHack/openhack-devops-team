# This is a basic workflow to help you get started with Actions

name: Herb Test 

# Controls when the action will run. Triggers the workflow on push or pull request
# events but only for the master branch 
on:
  push:
    branches: [ master ]

jobs:
  job1:
    name: GET
    runs-on: ubuntu-latest

    steps:            
        - uses: satak/webrequest-action@master
          name: webhook
          id: webhook
          with:
            url: https://openhackbxb3pxs9userjava.azurewebsites.net/api/healthcheck/user-java
            method: GET            
        - name: 'verify healthy'
          if: "${{ fromJson(steps.webhook.outputs.output).data.status == 'healthy'}}"
          run: echo "healthy"
        - name: 'verify Unhealthy'
          if: "${{ fromJson(steps.webhook.outputs.output).data.status != 'healthy'}}"
          run: echo "unhealthy"
      
          
